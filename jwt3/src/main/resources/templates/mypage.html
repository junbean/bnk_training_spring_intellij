<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        // í˜ì´ì§€ ë¡œë”© ì‹œ ìë™ ì‹¤í–‰
        window.onload = async function () {
          const token = localStorage.getItem("token");

          if (!token) {
            document.getElementById("userinfo").innerText = "âŒ JWTê°€ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.";
            return;
          }

          try {
            const response = await fetch("/user", {
              method: "GET",
              headers: {
                "userAuth": token
              }
            });

            if (response.ok) {
              const data = await response.text();
              document.getElementById("userinfo").innerText = "âœ… ì‚¬ìš©ì ì •ë³´: " + data;
            } else {
              document.getElementById("userinfo").innerText = "âŒ í† í°ì´ ë§Œë£Œë˜ì—ˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
            }

          } catch (err) {
            document.getElementById("userinfo").innerText = "âŒ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + err;
          }
        }
    </script>
</head>
<body>
    <h1>Welcome to JWT Demo</h1>
    <div id="userinfo">ğŸ”„ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    <br>
    <a href="/">ğŸ  ì¸ë±ìŠ¤ë¡œ ëŒì•„ê°€ê¸°</a>
</body>
</html>